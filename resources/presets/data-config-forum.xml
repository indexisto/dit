<dataConfig>

	<!-- author (by author_id), join to validate activeness -->

	<dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver"
		url="jdbc:mysql://localhost/bitrix" user="root" password="s2s" />
	
	<document name="doc">
		<entity name="forum_message"
			query="SELECT 
			id, forum_id, topic_id, attach_img, 
			post_date, post_message, post_message_html,
			author_name
			FROM b_forum_message WHERE approved='Y'">
			<entity name="forum_topic"
				query="SELECT title AS forum_topic_title   
				FROM b_forum_topic 
				WHERE id='${forum_message.topic_id}' AND approved='Y' ">
			</entity>
			<entity name="forum" 
				query="SELECT name AS forum_name   
				FROM b_forum 
				WHERE id='${forum_message.forum_id}' AND active='Y'">
			</entity>			
		</entity>
	</document>
  
</dataConfig>